const { Client, GatewayIntentBits } = require("discord.js"); const fs = require("fs"); const express = require("express"); const config = require("./config");

const client = new Client({ intents: [ GatewayIntentBits.Guilds, GatewayIntentBits.GuildMembers, GatewayIntentBits.GuildPresences, GatewayIntentBits.GuildMessages, GatewayIntentBits.MessageContent, ], });

// Keep-alive server (Railway) const app = express(); app.get("/", (_, res) => res.send("Bot Akira aktif")); app.listen(process.env.PORT || 3000, () => { console.log("🌐 Web server hidup"); });

// Load event handler fs.readdirSync("./events").forEach((file) => { const event = require(./events/${file}); if (event.once) { client.once(event.name, (...args) => event.execute(...args, client)); } else { client.on(event.name, (...args) => event.execute(...args, client)); } });

// Load scheduler (pesan otomatis) const schedule = require("./scheduler"); schedule(client);

// Handle global error process.on("unhandledRejection", (err) => { console.error("💥 Unhandled Error:", err); });

// Command test: !test client.on("messageCreate", (message) => { if (message.content.toLowerCase() === "!test") { message.channel.send("✅ Bot aktif dan merespon command !test"); } });

client.login(config.token);

